!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],t):t(n.fc=n.fc||{},n.d3)}(this,function(n,t){"use strict";var e=function(){var n=10,e=function(e){return n<=1?e.map(function(n){return[n]}):t.range(0,Math.ceil(e.length/n)).map(function(t){return e.slice(t*n,(t+1)*n)})};return e.bucketSize=function(t){return arguments.length?(n=t,e):n},e},r=function(n,t,e){var r=t[e];if("function"!=typeof r)throw new Error("Attempt to rebind "+e+" which isn't a function on the source object");return function(){for(var e=arguments.length,u=Array(e),i=0;i<e;i++)u[i]=arguments[i];var o=r.apply(t,u);return o===t?n:o}},u=function(n,t){for(var e=arguments.length,u=Array(e>2?e-2:0),i=2;i<e;i++)u[i-2]=arguments[i];var o=!0,c=!1,a=void 0;try{for(var f,l=u[Symbol.iterator]();!(o=(f=l.next()).done);o=!0){var h=f.value;n[h]=r(n,t,h)}}catch(n){c=!0,a=n}finally{try{!o&&l.return&&l.return()}finally{if(c)throw a}}return n},i=function(){function n(n){var e=n.map(function(n){return[i(n),o(n)]});return t.range(1,e.length-1).map(function(n){var t=e[n-1],r=e[n],u=e[n+1];return.5*Math.abs((t[0]-u[0])*(r[1]-t[1])-(t[0]-r[0])*(u[1]-t[1]))})}var r=e(),i=function(n){return n},o=function(n){return n},c=function(e){if(r.bucketSize()>=e.length)return e;var u=n(e),i=r(u),o=r(e.slice(1,e.length-1)),c=o.map(function(n,e){var r=i[e],u=t.max(r);return n[r.indexOf(u)]});return[].concat([e[0]],c,[e[e.length-1]])};return u(c,r,"bucketSize"),c.x=function(n){return arguments.length?(i=n,c):i},c.y=function(n){return arguments.length?(o=n,c):o},c},o=function(){var n=function(n){return n},r=function(n){return n},i=e(),o=function(e){if(i.bucketSize()>=e.length)return e;var u=i(e.slice(1,e.length-1)),o=e[0],c=e[e.length-1],a=[].concat([o],u,[c]),f=n(o),l=r(o),h=u.map(function(e,u){var i=t.mean(a[u+1],n),o=t.mean(a[u+1],r),c=e.map(function(t){return[n(t),r(t)]}),h=c.map(function(n){return.5*Math.abs((f-i)*(n[1]-l)-(f-n[0])*(o-l))}),g=h.indexOf(t.max(h)),v=c[g];return f=v[0],l=v[1],e[g]});return[].concat([e[0]],h,[e[e.length-1]])};return u(o,i,"bucketSize"),o.x=function(t){return arguments.length?(n=t,o):n},o.y=function(n){return arguments.length?(r=n,o):r},o},c=function(){var n=e(),r=function(n){return n},i=function(e){if(n.bucketSize()>e.length)return e;var u=t.extent(e,r),i=n(e.slice(1,e.length-1)),o=i.map(function(n,t){var e,i,o={},c=!0,a=n.map(r),f=a.filter(function(n){return n===u[0]||n===u[1]}).map(function(n){return a.indexOf(n)})[0];return void 0!==f?n[f]:(a.forEach(function(n,t){void 0===o[n]&&(o[n]=0),o[n]++,o[n]>o[e]||void 0===e?(e=n,i=t,c=!0):o[n]===o[e]&&(c=!1)}),c?n[i]:n[Math.floor(n.length/2)])});return[].concat([e[0]],o,[e[e.length-1]])};return u(i,n,"bucketSize"),i.value=function(n){return arguments.length?(r=n,i):r},i};n.bucket=e,n.largestTriangleOneBucket=i,n.largestTriangleThreeBucket=o,n.modeMedian=c,Object.defineProperty(n,"__esModule",{value:!0})});