!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-random"),require("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-random","d3-time"],t):t(n.fc=n.fc||{},n.d3,n.d3)}(this,function(n,t,e){"use strict";function r(n){return"function"==typeof n?n:function(){return n}}var o=function(){var n=1,e=20,r=.1,o=.1,i=t.randomNormal(),u=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=n/e,a=[],f=0;f<e+1;f++){a.push(t);var l=i()*Math.sqrt(u)*o+(r-o*o/2)*u;t*=Math.exp(l)}return a};return u.period=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.steps=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.mu=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},u.sigma=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u.random=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u},i=function(n,t,e){var r=t[e];if("function"!=typeof r)throw new Error("Attempt to rebind "+e+" which isn't a function on the source object");return function(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];var u=r.apply(t,o);return u===t?n:u}},u=function(n){return function(t){return n.reduce(function(n,t){return n&&t(n)},t)}},a=function(n,t){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;o<e;o++)r[o-2]=arguments[o];var a=u(r),f=!0,l=!1,c=void 0;try{for(var d,h=Object.keys(t)[Symbol.iterator]();!(f=(d=h.next()).done);f=!0){var v=d.value,m=a(v);m&&(n[m]=i(n,t,v))}}catch(n){l=!0,c=n}finally{try{!f&&h.return&&h.return()}finally{if(l)throw c}}return n},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l=function(){var n=new Date,i=100,u=e.timeDay,l=1,c=e.timeYear,d=1,h=null,v=function(){var n=t.randomNormal(1,.1);return Math.ceil(1e3*n())},m=o(),y=function(n){var t=c.offset(n,d)-n;return(u.offset(n,l)-n)/t},p=function(n,t){var e=y(n),r=m.period(e)(t),o={date:n,open:r[0],high:Math.max.apply(Math,r),low:Math.min.apply(Math,r),close:r[m.steps()]};return o.volume=v(o),o},s=function(t){var e=void 0,r=void 0,o=void 0;do{e=t?u.offset(t.date,l):new Date(n.getTime()),r=t?t.close:i,t=p(e,r),o=h&&!h(t)}while(o);return t},g=function(){var n=void 0,t={};return t.next=function(){var t=s(n);return n=t,t},t.take=function(n){return t.until(function(t,e){return!n||n<0||e===n})},t.until=function(t){for(var e=[],r=0,o=s(n),i=t&&!t(o,r);i;)e.push(o),n=o,o=s(n),r+=1,i=t&&!t(o,r);return e},t},b=function(n){return g().take(n)};if(b.stream=g,"function"!=typeof Symbol||"symbol"!==f(Symbol.iterator))throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return b[Symbol.iterator]=function(){var n=g();return{next:function(){return{value:n.next(),done:!1}}}},b.startDate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],b):n},b.startPrice=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],b):i},b.interval=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.intervalStep=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],b):l},b.unitInterval=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],b):c},b.unitIntervalStep=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],b):d},b.filter=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],b):h},b.volume=function(){return arguments.length?(v=r(arguments.length<=0?void 0:arguments[0]),b):v},a(b,m),b},c=function(n){var t=n.date.getDay();return!(0===t||6===t)};n.randomFinancial=l,n.randomGeometricBrownianMotion=o,n.randomSkipWeekends=c,Object.defineProperty(n,"__esModule",{value:!0})});