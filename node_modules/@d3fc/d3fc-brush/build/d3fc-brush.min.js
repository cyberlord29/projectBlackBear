!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("d3-scale"),require("d3-dispatch"),require("d3-brush")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-scale","d3-dispatch","d3-brush"],e):e(n.fc=n.fc||{},n.d3,n.d3,n.d3,n.d3)}(this,function(n,e,t,r,i){"use strict";var o=function(n,e,t){var r=e[t];if("function"!=typeof r)throw new Error("Attempt to rebind "+t+" which isn't a function on the source object");return function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];var u=r.apply(e,i);return u===e?n:u}},u=function(n,e){for(var t=arguments.length,r=Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];var u=!0,a=!1,c=void 0;try{for(var l,s=r[Symbol.iterator]();!(u=(l=s.next()).done);u=!0){var f=l.value;n[f]=o(n,e,f)}}catch(n){a=!0,c=n}finally{try{!u&&s.return&&s.return()}finally{if(a)throw c}}return n},a=function(n,e){n=n||"g";var t=function(n,e){return e},r=null,i=function(i,o){o=o||function(n){return n};var u=i.selection?i:null;u&&(i=i.selection());var a=i.selectAll(function(n,e,t){return Array.from(t[e].childNodes).filter(function(n){return 1===n.nodeType})}).filter(null==e?n:n+"."+e),c=a.data(o,t),l=c.enter().append(n).attr("class",e),s=c.exit();c=c.merge(l);var f=u||r;return f&&(c=c.transition(f).style("opacity",1),l.style("opacity",1e-6),s=s.transition(f).style("opacity",1e-6)),s.remove(),c.enter=function(){return l},c.exit=function(){return s},c};return i.element=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.className=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.key=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.transition=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},c=function(n){switch(n){case"x":return i.brushX();case"y":return i.brushY();case"xy":return i.brush()}},l=function(n){return[n[1],n[0]]},s=function(n){var i=c(n),o=r.dispatch("brush","start","end"),s=t.scaleIdentity(),f=t.scaleIdentity(),d=a("g","brush"),v=function(e,t,r){switch(n){case"x":return e.map(t);case"y":return e.map(r);case"xy":return[[t(e[0][0]),r(e[0][1])],[t(e[1][0]),r(e[1][1])]]}},h=function(n){return v(n,t.scaleLinear().domain(s.range()).invert,t.scaleLinear().domain(l(f.range())).invert)},y=function(n){return v(n,t.scaleLinear().domain(s.range()),t.scaleLinear().domain(l(f.range())))},p=function(e){var r=t.scaleLinear().domain(s.domain());return"x"===n?e.map(r.invert):"xy"===n?[r.invert(e[0][0]),r.invert(e[1][0])]:void 0},g=function(e){var r=t.scaleLinear().domain(l(f.domain()));return"y"===n?[e[1],e[0]].map(r.invert):"xy"===n?[r.invert(e[1][1]),r.invert(e[0][1])]:void 0},m=function(n){if(!n.sourceEvent||"draw"!==n.sourceEvent.type)if(n.selection){var e=y(n.selection);o.call(n.type,{},{selection:e,xDomain:p(e),yDomain:g(e)})}else o.call(n.type,{},{})},x=function(n){n.each(function(n,t,r){i.extent([[s.range()[0],f.range()[1]],[s.range()[1],f.range()[0]]]),i.on("end",function(){return m(e.event)}).on("brush",function(){return m(e.event)}).on("start",function(){return m(e.event)}),d(e.select(r[t]),[n]).call(i).call(i.move,n?h(n):null)})};return x.xScale=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],x):s},x.yScale=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],x):f},u(x,o,"on"),u(x,i,"filter","handleSize"),x},f=function(){return s("x")},d=function(){return s("y")},v=function(){return s("xy")};n.brushX=f,n.brushY=d,n.brush=v,Object.defineProperty(n,"__esModule",{value:!0})});