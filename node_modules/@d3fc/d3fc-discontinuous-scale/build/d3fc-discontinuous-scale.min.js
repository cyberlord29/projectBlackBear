!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-scale"),require("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-scale","d3-time"],t):t(n.fc=n.fc||{},n.d3,n.d3)}(this,function(n,t,e){"use strict";function r(n,t){var e=[],r=!0,i=!1,o=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value,f=t.clampUp(c);f===t.clampDown(c)&&e.push(f)}}catch(n){i=!0,o=n}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return e}function i(n){var e=this;arguments.length||(n=t.scaleIdentity());var o=y(),u=function(t){var e=n.domain(),r=n.range(),i=o.distance(e[0],e[1]);return o.distance(e[0],t)/i*(r[1]-r[0])+r[0]};return u.invert=function(t){var e=n.domain(),r=n.range(),i=(t-r[0])/(r[1]-r[0]),u=o.distance(e[0],e[1]),a=i*u;return o.offset(e[0],a)},u.domain=function(){if(!arguments.length)return n.domain();var t=arguments.length<=0?void 0:arguments[0],e=o.clampUp(t[0]),r=o.clampDown(t[1]);return n.domain([e,r]),u},u.nice=function(){n.nice();var t=n.domain(),e=o.clampUp(t[0]),r=o.clampDown(t[1]);return n.domain([e,r]),u},u.ticks=function(){for(var t=arguments.length,i=Array(t),u=0;u<t;u++)i[u]=arguments[u];return r(n.ticks.apply(e,i),o)},u.copy=function(){return i(n.copy()).discontinuityProvider(o.copy())},u.discontinuityProvider=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},a(u,n,f("range","rangeRound","interpolate","clamp","tickFormat")),u}var o=function(n,t,e){var r=t[e];if("function"!=typeof r)throw new Error("Attempt to rebind "+e+" which isn't a function on the source object");return function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var u=r.apply(t,i);return u===t?n:u}},u=function(n){return function(t){return n.reduce(function(n,t){return n&&t(n)},t)}},a=function(n,t){for(var e=arguments.length,r=Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var a=u(r),c=!0,f=!1,y=void 0;try{for(var l,m=Object.keys(t)[Symbol.iterator]();!(c=(l=m.next()).done);c=!0){var d=l.value,p=a(d);p&&(n[p]=o(n,t,d))}}catch(n){f=!0,y=n}finally{try{!c&&m.return&&m.return()}finally{if(f)throw y}}return n},c=function(n){return n.map(function(n){return"string"==typeof n?new RegExp("^"+n+"$"):n})},f=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return t=c(t),function(n){return t.some(function(t){return t.test(n)})&&n}},y=function(){var n={};return n.distance=function(n,t){return t-n},n.offset=function(n,t){return n instanceof Date?new Date(n.getTime()+t):n+t},n.clampUp=function(n){return n},n.clampDown=function(n){return n},n.copy=function(){return n},n},l=function(){var n={sunday:0,monday:1,saturday:6},t={},r=function(n){return 0===n.getDay()||6===n.getDay()};return t.clampDown=function(t){if(t&&r(t)){var i=e.timeDay.ceil(t);return i.getDay()===n.sunday?e.timeDay.offset(i,-1):i.getDay()===n.monday?e.timeDay.offset(i,-2):i}return t},t.clampUp=function(t){if(t&&r(t)){var i=e.timeDay.floor(t);return i.getDay()===n.saturday?e.timeDay.offset(i,2):i.getDay()===n.sunday?e.timeDay.offset(i,1):i}return t},t.distance=function(n,r){n=t.clampUp(n),r=t.clampDown(r);var i=e.timeSaturday.ceil(n);if(r<i)return r.getTime()-n.getTime();var o=i.getTime()-n.getTime(),u=e.timeSaturday.ceil(r),a=u.getTime()-r.getTime();return 432e6*Math.round((u.getTime()-i.getTime())/6048e5)+o-a},t.offset=function(n,i){var o=r(n)?t.clampUp(n):n;if(0===i)return o;var u=i<0,a=i>0,c=i,f=u?e.timeMonday.floor(o):e.timeSaturday.ceil(o);if(c-=f.getTime()-o.getTime(),u&&c>0||a&&c<0)return new Date(o.getTime()+i);o=u?f:e.timeDay.offset(f,2);var y=Math.floor(c/432e6);return o=e.timeDay.offset(o,7*y),c-=432e6*y,o=new Date(o.getTime()+c)},t.copy=function(){return t},t},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},d=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];var r=function(n,t){return n>t[0]&&n<t[1]},i=function(n,t){return n[0]>=t[0]&&n[1]<=t[1]},o={};o.distance=function(n,e){n=o.clampUp(n),e=o.clampDown(e);var r=t.filter(function(t){return i(t,[n,e])}),u=r.map(function(n){return n[1]-n[0]});return e-n-u.reduce(function(n,t){return n+t},0)};var u=function(n,t){return n instanceof Date?new Date(n.getTime()+t):n+t};return o.offset=function(n,e){if(e>0){var r=function(){for(var r=o.clampUp(n),i=e;i>0;){var a=t.filter(function(n){return n[0]>r}).sort(function(n,t){return n[0]-t[0]});if(a.length){var c=a[0],f=c[0]-r;f>i?(r=u(r,i),i=0):(r=c[1],i-=f)}else r=u(r,i),i=0}return{v:r}}();if("object"===(void 0===r?"undefined":m(r)))return r.v}else{var i=function(){for(var r=o.clampDown(n),i=e;i<0;){var a=t.filter(function(n){return n[1]<r}).sort(function(n,t){return t[0]-n[0]});if(a.length){var c=a[0],f=c[1]-r;f<i?(r=u(r,i),i=0):(r=c[0],i-=f)}else r=u(r,i),i=0}return{v:r}}();if("object"===(void 0===i?"undefined":m(i)))return i.v}},o.clampUp=function(n){return t.reduce(function(n,t){return r(n,t)?t[1]:n},n)},o.clampDown=function(n){return t.reduce(function(n,t){return r(n,t)?t[0]:n},n)},o.copy=function(){return o},o};n.scaleDiscontinuous=i,n.discontinuitySkipWeekends=l,n.discontinuityIdentity=y,n.discontinuityRange=d,Object.defineProperty(n,"__esModule",{value:!0})});